{% extends 'base_admin.html.twig' %}

{% block title %}Quiz Management{% endblock %}

{% block main %}
<h1 class="mb-4">Quiz Management</h1>

{% for message in app.flashes('success') %}
<div class="alert alert-success">
    {{ message }}
</div>
{% endfor %}

<div class="mb-4 d-flex justify-content-end">
    <a href="{{ path('app_admin_quiz_create') }}" class="btn btn-primary">
        <i class="fas fa-plus"></i> Create New Quiz
    </a>
</div>

{% if missions is empty %}
<div class="alert alert-info">
    No quizzes found. Click the button above to create your first quiz!
</div>
{% else %}
<div class="table-responsive">
    <table class="table table-striped table-hover">
        <thead class="table-dark">
            <tr>
                <th>ID</th>
                <th>Title</th>
                <th>Language Course</th>
                <th>Questions</th>
                <th>XP Reward</th>
                <th>Created At</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for mission in missions %}
            <tr>
                <td>{{ mission.id }}</td>
                <td>{{ mission.label }}</td>
                <td>{{ mission.languageCourse.label }}</td>
                <td>{{ mission.questions|length }}</td>
                <td>{{ mission.xpReward }}</td>
                <td>{{ mission.createdAt|date('Y-m-d H:i') }}</td>
                <td>
                    <a href="{{ path('app_admin_quiz_edit', {'id': mission.id}) }}"
                        class="btn btn-sm btn-outline-primary">
                        <i class="fas fa-edit"></i> Edit
                    </a>
                    <a href="{{ path('app_admin_quiz_delete', {'id': mission.id}) }}"
                        class="btn btn-sm btn-outline-danger"
                        onclick="return confirm('Are you sure you want to delete this quiz? This will also delete all its questions and options.')">
                        <i class="fas fa-trash"></i> Delete
                    </a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endif %}
{% endblock %}